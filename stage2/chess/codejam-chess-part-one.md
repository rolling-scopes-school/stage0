| Срок исполнения | Имя папки | branch |
| ----------- | ------------- | ------------- |
|  | codejam-chess | codejam-chess |


# Codejam chess Часть 1

## Задача

Необходимо реализовать игру "Шахматы" с возможностью:
- Играть двум игрокам с одного компьютера
- Играть двум игрокам по сети через сервер
- Играть на одном компьютере против ИИ противника (Hacker Score)

### UX прототип

[Базовый макет с прототипом функциональности](https://www.figma.com/file/evlqVrepoIieC5KiVcRFYt/Chess)

Возможно вносить любые изменения в изначальный дизайн, однако функционал должен быть идентичен поведению из прототипа.


## Требования к функционалу приложения

* Приложение должно быть написано на Typescript
* До запуска игры должна быть возможность изменить имя игрока.
* До запуска игры должна быть выбрать режим (по сети\в режиме игры двух игроков с двух пк\в режиме игры с ботом (не обязательно)).
* После смены имени должна измениться аватар пользователя: 
    * На любом фоне должны отображаться первые буквы из первых двух введенных слов в формате: John Week => J.W. 
    * Если введено только одно слово - должна отображаться только одна буква: John => J.

* По клику на кнопку "Старт" должен запуститься игровой цикл.
* Каждая фигура должна ходить согласно [общепринятым правилам шахмат](https://chessacademy.kz/education).
* У каждого игрока должна отображаться история ходов, в которой должно быть:
    * Фигура, которой ход был совершен
    * Время когда ход был совершен
    * Начальная и конечная клетка на которую ход был совершен в формате: E2-E4
* Должен быть реализован таймер игры ведущий отчет от начала игры. 
* После совершения хода Время таймера должно совпадать со временем указанным в истории ходов. 
* Для любого игрока должна быть возможность принять поражение. В случае принятия поражения победа засчитывается оппоненту.
* Во время хода игрок, который совершает ход, должен быть помечен соответствующей иконкой.
* Должна быть реализована механика рокировки.
* В случае ситуации "Шах", должна быть подсветка ячеек ходов из-за которых такая ситуация возникла.
* В случае ситуации "Шах", ячейка на которой находится король должна быть выделена.
* В случае ситуации "Мат", должна быть подсветка ячеек ходов из-за которых такая ситуация возникла. Цвет должен быть отличен от цвета использованном в событии "Шах".
* В случае ситуации "Мат", ячейка на которой находится король должна быть выделена.
* В случае ситуации "Мат", игрок, фигура которого поставила "Мат" объявляется победителем.
* Победитель должен быть выделен соответствующим образом.
* После выигрыша\поражения игрока таймер должен остановится.
* После завершения игры игроку должен быть предоставлен следующий выбор:
    * Вернуться в лобби, где игрок сможет начать новую игру.
    * Просмотреть повтор текущего матча.
* Фигуры должны передвигаться по доске с помощью drag-and-drop.
* Доступные ходы фигуры должны быть подсвечены.
* Ход должен завершаться после того как фигура была поставлена на новую ячейку.
* Первый ход должна совершать "Белая" сторона.

## Задания повышенной сложности:

* Реализовать механику ситуации "Ничья".
* Реализовать ИИ бота противника.

### Особенности реализации в зависимости от выбранного типа игры:

Режим игры двух игроков с одного ПК:
* При передаче хода другому игроку должна быть реализованна следующая анимация:
 * Символы, отвечающие за маркировку сетки таблицы должны исчезнуть (Если они предусмотренны выбранным дизайном) (A-H, 1-8).
 * Доска должна развернуться на 180 градусов.
 * Символы, отвечающие за маркировку сетки таблицы должны появиться (Если они предусмотренны выбранным дизайном) (A-H, 1-8).

#### eslint
`eslint` должен быть настроен

- `eslint` включен в` package.json`,
- вы должны использовать конфигурацию `eslint-config-airbnb-base`
- весь код должен быть проверен
- проверка eslint выполняется запуском команды `npm run lint`

#### Ограничения
- задание должно работать в Chrome
- Использование material design, semantic-ui или bootstrap допускается
- Вы НЕ МОЖЕТЕ использовать какие-либо фреймворки, такие как Angular / React / Vue
- Вы можете использовать препроцессоры
- Вы можете общаться, переписываться в чате, гуглить и использовать stackoverflow
- Вы можете использовать lodash.js

### Последовательность выполнения

- в выданном вам приватном репозитории создать ветку codejam-chess
- создать папку codejam-chess. Все файлы проекта должны находиться в папке "codejam-chess". Организация кода внутри папки на ваше усмотрение.
- Создайте HTML-файл с основным макетом и CSS-стилями для него.
- Реализовать страницу Лобби с возможностью запуска игры и смены имени игрока
- Базово реализовать страницу игры (Игровое поле, фигуры, иконки соперников, таблицы ходов)
- Реализовать drag and drop передвижение фигур
- Добавить ограничения хода для разных фигур
- Реализовать механику взятия фигуры противника.
- Реализовать механику "Шах"
- Реализовать механику "Мат"
- Реализовать механику Прекращения текущий игры (Выход в лобби с присвоением поражения игроку совершавшему ход).
- Добавить таблицы ходов для каждого из игроков.
- Реализовать таймер текущей парии, который начинается со старта партии и завершается после победы\поражения одного из игроков.
- Реализовать анимацию поворота доски при сменен хода.
- При желании приступить к выполнению задания повышенной сложности.

## Оценка

Максимальный балл - **215**

### Основное задание

- [ ] **+30** - присутствует верстка со всеми базовыми элементами (Игроки, таблицы ходов, игровое поле)
- [ ] **+10** - реализована возможность смени имени игрока
- [ ] **+10** - реализован запуск игрового цикла
- [ ] **+10** - шаги игроков и время хода отображаются в таблице
- [ ] **+20** - все фигуры ходят согласно правилам шахмат
- [ ] **+10** - есть подсветка доступных шагов для фигуры
- [ ] **+10** - реализованна возможность перетаскивать фигуры с помощью drag and drop
- [ ] **+5** - игрок совершающий ход имеет соответствующую отметку
- [ ] **+5** - при смене игрока доска поворачивается с анимацией
- [ ] **+10** - реализована подсветка ситуации ШАХ и подсвечиваются клетки из-за которых она возникла
- [ ] **+10** - реализована подсветка ситуации МАТ и подсвечиваются клетки из-за которых она возникла
- [ ] **+5** - победивший игрок подсвечивается
- [ ] **+5** - после победы есть возможность вернутся в Лобби
- [ ] **+10** - во время игры игрок может признать поражение, противник при этом должен быть признан победителем
- [ ] **+10** - в приложении используется indexDB
- [ ] **+10** - в приложении используется webpack
- [ ] **+5** - в приложении используется препроцессор
- [ ] **+5** - в приложении используется соблюдены требования к показу "аватара" игрока

Итого: **180**

### Задание супер повышенной сложности
- [ ] **+5** - реализовать бота противника любой сложности
- [ ] **+10** - реализовать бота способного проанализировать шаги игрока и просчитывать наиболее выгодные ходы не менее чем на два хода
- [ ] **+5** - создать бота способного придерживаться любой тактики.  
- [ ] **+10** - создать адаптивного бота способного менять тактики в зависимости от ситуации.
- [ ] **+10** - реализовать механику ситуации "Ничья".

Итого: **40**


### Штрафы
- [ ] **-10** - `eslint` не настроен
- [ ] **-20** Требования к коммитам, репозиторию и PR не выполнены
- [ ] **-100** Не использован Typescript

## Дополнительная информация
- Index DB - https://learn.javascript.ru/indexeddb
- express-websocket - https://habr.com/ru/post/516334/
- express - https://expressjs.com/ru/
- websocket - https://learn.javascript.ru/websocket
- репозиторий с вебпак - https://github.com/abyss-soft/webpack
- настройка вебпак - https://webpack.js.org/guides/getting-started/
